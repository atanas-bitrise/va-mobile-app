"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5959],{4689:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var n=a(58168),i=(a(96540),a(15680));a(41873);const o={title:"UI Automation Testing",sidebar_position:1},r="UI Automation Testing",s={unversionedId:"QA/QualityAssuranceProcess/Automation/index",id:"QA/QualityAssuranceProcess/Automation/index",title:"UI Automation Testing",description:"Background",source:"@site/docs/QA/QualityAssuranceProcess/Automation/index.md",sourceDirName:"QA/QualityAssuranceProcess/Automation",slug:"/QA/QualityAssuranceProcess/Automation/",permalink:"/va-mobile-app/docs/QA/QualityAssuranceProcess/Automation/",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"UI Automation Testing",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Accessibility Testing Plan",permalink:"/va-mobile-app/docs/QA/QualityAssuranceProcess/Accessibility/testing-plan"},next:{title:"Adding new e2e tests to Availability Framework and Nav",permalink:"/va-mobile-app/docs/QA/QualityAssuranceProcess/Automation/AddingNewFeatures"}},l={},u=[{value:"Background",id:"background",level:2},{value:"Detox: our UI automation tool",id:"detox-our-ui-automation-tool",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Local setup for detox",id:"local-setup-for-detox",level:3},{value:"UI Automation Testing Process",id:"ui-automation-testing-process",level:2},{value:"Release Candidate Automation",id:"release-candidate-automation",level:3}],d={toc:u},c="wrapper";function p(e){let{components:t,...a}=e;return(0,i.yg)(c,(0,n.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"ui-automation-testing"},"UI Automation Testing"),(0,i.yg)("h2",{id:"background"},"Background"),(0,i.yg)("p",null,(0,i.yg)("em",{parentName:"p"},'For folks looking for a basic primer on "what is UI automation testing", reading one of the ',(0,i.yg)("a",{parentName:"em",href:"https://www.atlassian.com/continuous-delivery/software-testing/types-of-software-testing"},"many articles available via quick google search")," is the recommended method. This section instead covers the background of automated UI testing for the mobile team.")),(0,i.yg)("p",null,"Implementing robust UI automation for the mobile team supports several team goals - more efficiently using QA Engineer time, finding bugs sooner/reducing regressions, and improving FE efficiency (reducing the number of flaky unit tests that are written to accomplish what UI automation is better positioned to test). "),(0,i.yg)("p",null,"Phases include:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Tool assessment & initial implementation"),": Completed Q3 2022"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Release candidate script automation"),": Slated for Q4 2023"),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Key end-to-end test automation"),": ",(0,i.yg)("em",{parentName:"li"},"Future"))),(0,i.yg)("h2",{id:"detox-our-ui-automation-tool"},"Detox: our UI automation tool"),(0,i.yg)("p",null,"Our automated UI testing is done with ",(0,i.yg)("a",{parentName:"p",href:"https://wix.github.io/Detox/"},"Detox"),", which we picked over other tools because it slotted in nicely with existing tools/tech for the team (react native, javascript, jest) while also having more robust functionality with lighter lift than some other tools (write a single script that executes cross-platform; active development, support & documentation updates from the detox team; etc)."),(0,i.yg)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.yg)("p",null,"Follow instructions for FE ",(0,i.yg)("a",{parentName:"p",href:"https://department-of-veterans-affairs.github.io/va-mobile-app/docs/Engineering/FrontEnd/DevSetupProcess"},"Development Setup Instructions")),(0,i.yg)("h3",{id:"local-setup-for-detox"},"Local setup for detox"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"Check for the ",(0,i.yg)("a",{parentName:"li",href:"https://wix.github.io/Detox/docs/introduction/getting-started#detox-prerequisites"},"detox pre-reqs")," on your local machine and install if needed using the ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn")," package manager.",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"If needed find and delete the detoxrc.js file. This file is sometimes created when you initially install detox and is not needed because the VA Mobile App uses .detoxrc.json file. "))),(0,i.yg)("li",{parentName:"ol"},"Check that the emulators used by the script (",(0,i.yg)("a",{parentName:"li",href:"https://github.com/department-of-veterans-affairs/va-mobile-app/blob/develop/VAMobile/.detoxrc.json#L17"},"listed in .detoxrc.json"),") are installed on your machine, and install them if not. ",(0,i.yg)("a",{parentName:"li",href:"https://wix.github.io/Detox/docs/introduction/project-setup#step-3-device-configs"},"Helpful instructions from detox"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},'If you need to create a new Android emulator, make sure to bump up the internal storage (default is 800, bumping to 8000 definitely works). If you don\'t do this, you\'ll get an out of storage error. One path that works for this: Shift-Shift > search "Virtual Device Manager" > {create new device or edit existing device} > Show Advanced Settings > scroll down to the "Memory and Storage" section to find the "Internal Storage" field'))),(0,i.yg)("li",{parentName:"ol"},"Build and Run App",(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},"Run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn install")," to install the project dependencies"),(0,i.yg)("li",{parentName:"ol"},"Start Metro with ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn start")," and leave it running in its own separate terminal"),(0,i.yg)("li",{parentName:"ol"},"Run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn e2e:ios-build")," to build the iOS app"),(0,i.yg)("li",{parentName:"ol"},"Run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn e2e:android-build")," to build the Android app"))),(0,i.yg)("li",{parentName:"ol"},"Run Tests",(0,i.yg)("ol",{parentName:"li"},(0,i.yg)("li",{parentName:"ol"},"Run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn e2e:ios-test")," to run the iOS tests",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"If you want to see the iOS tests on the simulator, you need to have the Simulator app open or run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn ios")," before starting the iOS tests (but, if you don't care about watching on the simulator, it'll still run fine without it.)"))),(0,i.yg)("li",{parentName:"ol"},"Run ",(0,i.yg)("inlineCode",{parentName:"li"},"yarn e2e:android-test")," to run the Android tests",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Android will open the emulator & show you the tests running, automatically."),(0,i.yg)("li",{parentName:"ul"},"If android tests hangs and you receive this error: ",(0,i.yg)("em",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"em"},'Exceeded timeout of 300000ms while handling jest-circus "setup" event')),", you will need to downgrade API of AVD System Image to 28",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Open ",(0,i.yg)("em",{parentName:"li"},"Android Studio")),(0,i.yg)("li",{parentName:"ul"},"Go to ",(0,i.yg)("inlineCode",{parentName:"li"},"Tools -> Device Manager -> (next to emulator used for tests) Edit this AVD -> (next to system image) Change")),(0,i.yg)("li",{parentName:"ul"},"Change API Level to 28 (Release name: ",(0,i.yg)("em",{parentName:"li"},"Pie"),")"))),(0,i.yg)("li",{parentName:"ul"},"Individual test runtime is ~30 seconds (we start all tests back from the login window). Total test runtime will change as we add more tests, but expect it to take a few minutes as well.")))))),(0,i.yg)("h2",{id:"ui-automation-testing-process"},"UI Automation Testing Process"),(0,i.yg)("h3",{id:"release-candidate-automation"},"Release Candidate Automation"),(0,i.yg)("p",null,"The RC regression script is split into two sections: testing covered manually, and ",(0,i.yg)("a",{parentName:"p",href:"https://dsvavsp.testrail.io/index.php?/suites/view/92&group_by=cases:section_id&group_order=desc&display_deleted_cases=0&group_id=9683"},"testing covered with automation."),"."),(0,i.yg)("p",null,"Each release, someone from the QA team is responsible for 'babysitting' the automated tests for the release candidate build. This person is responsible for confirming all automated cases have run against the correct build, and then signing off on automated testing by leaving a comment in the release sign-off ticket. There are three potential outcomes for this signoff, here's an example of what the comment would look like for each:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},"All automated cases pass, signing off on that section"),(0,i.yg)("li",{parentName:"ol"},"Some automated cases failed: (list of which cases & why). These failures do not indicate a breaking change with the app, and I have written up automation maintenance ticket(s) for the necessary changes: (links to relevant tickets)"),(0,i.yg)("li",{parentName:"ol"},"Some automated cases failed: (list of which cases & why). These failures are breaking changes in the app, and I have written up bug ticket(s): (links to relevant tickets). These bugs SHOULD / SHOULD NOT prevent release of the app.")),(0,i.yg)("p",null,"We create additional tickets, even for test script maintenance issues, to avoid pushing changes onto the RC branch during the release process."))}p.isMDXComponent=!0},15680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>g});var n=a(96540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),u=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=u(a),m=i,g=c["".concat(l,".").concat(m)]||c[m]||p[m]||o;return a?n.createElement(g,r(r({ref:t},d),{},{components:a})):n.createElement(g,r({ref:t},d))}));function g(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,r[1]=s;for(var u=2;u<o;u++)r[u]=a[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},41873:(e,t,a)=>{a(96540)}}]);