"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5713],{18677:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>g});var r=n(58168),o=(n(96540),n(15680));n(41873);const a={},i="Google Signing Keys",l={unversionedId:"Engineering/DevOps/Automation Code Docs/Signing Keys/Google",id:"Engineering/DevOps/Automation Code Docs/Signing Keys/Google",title:"Google Signing Keys",description:"Overview",source:"@site/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Google.md",sourceDirName:"Engineering/DevOps/Automation Code Docs/Signing Keys",slug:"/Engineering/DevOps/Automation Code Docs/Signing Keys/Google",permalink:"/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Google",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Firebase Signing Keys",permalink:"/va-mobile-app/docs/Engineering/DevOps/Automation Code Docs/Signing Keys/Firebase"},next:{title:"Making pull requests",permalink:"/va-mobile-app/docs/Engineering/DevOps/Making pull requests"}},s={},g=[{value:"Overview",id:"overview",level:2},{value:"Location in the CI",id:"location-in-the-ci",level:2},{value:"ENV Constants for the keys",id:"env-constants-for-the-keys",level:3},{value:"More Documentation",id:"more-documentation",level:2}],p={toc:g},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.yg)(c,(0,r.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"google-signing-keys"},"Google Signing Keys"),(0,o.yg)("h2",{id:"overview"},"Overview"),(0,o.yg)("p",null,"Google .aab files are signed with an upload key and signed by Google's app signing process after upload and before distribution. "),(0,o.yg)("p",null,"A new upload keystore and upload key are generated in Android Studio. Those keys are then stored as base64 strings within the CI and decoded during the build process."),(0,o.yg)("p",null,"An additional step of creating a Google Play service worker in order to upload with Fastlane tooling. This can only be done by the account holder. ",(0,o.yg)("a",{parentName:"p",href:"https://play.google.com/console/u/0/developers/7507611851470273082/contact-details"},"You can find that information for the VA account here")),(0,o.yg)("p",null,"This process rarely needs to happen. A service account can live the life of the app if the credentials are not shared. The same is true for the upload certificates. "),(0,o.yg)("h2",{id:"location-in-the-ci"},"Location in the CI"),(0,o.yg)("p",null,"The Android certificates are stored in GitHub Actions as base64 strings that are decoded by the CI when they are needed. "),(0,o.yg)("h3",{id:"env-constants-for-the-keys"},"ENV Constants for the keys"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"Key Name"),(0,o.yg)("th",{parentName:"tr",align:null},"ENV String"),(0,o.yg)("th",{parentName:"tr",align:null},"Destination ENV String"),(0,o.yg)("th",{parentName:"tr",align:null},"Decoded Location"),(0,o.yg)("th",{parentName:"tr",align:null},"CI Command"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"Android Keystore"),(0,o.yg)("td",{parentName:"tr",align:null},"GOOGLE_KS"),(0,o.yg)("td",{parentName:"tr",align:null},"GOOGLE_KS_PATH"),(0,o.yg)("td",{parentName:"tr",align:null},"~/project/VAMobile/android/keys/vamobile"),(0,o.yg)("td",{parentName:"tr",align:null},"decode_android_keys")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"Google Service Account"),(0,o.yg)("td",{parentName:"tr",align:null},"GOOGLE_SA_JSON"),(0,o.yg)("td",{parentName:"tr",align:null},"GOOGLE_SA_PATH"),(0,o.yg)("td",{parentName:"tr",align:null},"~/project/VAMobile/android/keys/service-account.json"),(0,o.yg)("td",{parentName:"tr",align:null},"decode_android_keys")))),(0,o.yg)("h2",{id:"more-documentation"},"More Documentation"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developer.android.com/studio/publish/app-signing"},"Android Developers")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://docs.fastlane.tools/actions/supply/#setup"},"Fastlane Google Setup")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developers.google.com/android-publisher/getting_started"},"Google Play Developer API")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://help.moreapp.com/en/support/solutions/articles/13000076096-how-to-create-a-service-account-for-the-google-play-store-moreapp"},"Sample Walk-through"))))}d.isMDXComponent=!0},15680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>y});var r=n(96540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),g=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=g(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=g(n),u=o,y=c["".concat(s,".").concat(u)]||c[u]||d[u]||a;return n?r.createElement(y,i(i({ref:t},p),{},{components:n})):r.createElement(y,i({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var g=2;g<a;g++)i[g]=n[g];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},41873:(e,t,n)=>{n(96540)}}]);