"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[6752],{96651:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(58168),r=(a(96540),a(15680));a(41873);const i={title:"Build automation overview",postion:1},o=void 0,s={unversionedId:"Engineering/DevOps/Overview",id:"Engineering/DevOps/Overview",title:"Build automation overview",description:"Releases",source:"@site/docs/Engineering/DevOps/Overview.md",sourceDirName:"Engineering/DevOps",slug:"/Engineering/DevOps/Overview",permalink:"/va-mobile-app/docs/Engineering/DevOps/Overview",draft:!1,tags:[],version:"current",frontMatter:{title:"Build automation overview",postion:1},sidebar:"tutorialSidebar",previous:{title:"Making pull requests",permalink:"/va-mobile-app/docs/Engineering/DevOps/Making pull requests"},next:{title:"User Experience",permalink:"/va-mobile-app/docs/UX/"}},l={},d=[{value:"Releases",id:"releases",level:2},{value:"NOTE: <em>Because chrontab notation doesn&#39;t have a way to schedule a job at an interval , i.e. every two weeks, the release action has to be scheduled for EVERY Tuesday. This means that if the approve command is run before the Tuesday in the middle of the sprint, the releases will go out a week early.</em>",id:"note-because-chrontab-notation-doesnt-have-a-way-to-schedule-a-job-at-an-interval--ie-every-two-weeks-the-release-action-has-to-be-scheduled-for-every-tuesday-this-means-that-if-the-approve-command-is-run-before-the-tuesday-in-the-middle-of-the-sprint-the-releases-will-go-out-a-week-early",level:5},{value:"QA Builds",id:"qa-builds",level:2},{value:"Daily Builds",id:"daily-builds",level:3},{value:"On Demand Builds",id:"on-demand-builds",level:3},{value:"On Demand Build Script",id:"on-demand-build-script",level:3}],u={toc:d},c="wrapper";function p(e){let{components:t,...a}=e;return(0,r.yg)(c,(0,n.A)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"releases"},"Releases"),(0,r.yg)("p",null,"Our releases are made live every other Tuesday morning. A GitHub Action runs every Tuesday morning to check and see if there is a staged build ready for developer release in the Apple App Store. For Play Store, it checks to see if there is a newer build than the production lane waiting in the Pre-Prod Stash lane. If there is, they are released to production at that time and sends a message to the main va-mobile-app channel in DSVA slack. If not, it completes silently. "),(0,r.yg)("p",null,"Release branches are cut by an Action every other Wednesday that follows a release. The release branch acts as a freeze on the develop branch for the next release that allows QA to run regressions from a static point and allows any last-minute changes to be added before being merged to main and build for review in the stores. This release branch being created then starts automation that creates the release ticket in GitHub and assigns the relevant people."),(0,r.yg)("p",null,"Releases coincide with the last day of a sprint and new release branches are cut on the first day of the sprint."),(0,r.yg)("p",null,"Release process approval ends with an authorized person (currently a VA Product Owner) releasing the app for build and upload to the stores by running the ",(0,r.yg)("inlineCode",{parentName:"p"},"/approve")," command in the automated release ticket. This is accomplish by adding a comment to the issue in the form of ",(0,r.yg)("inlineCode",{parentName:"p"},"/approve vX.Y.Z")," where X.Y.Z is the next version number. This version number should be present in the title of the ticket."),(0,r.yg)("p",null,"Once the release is approved, the build system will create and upload production versions of the app to the App Stores for review. Barring any issues, these should be released on the next Tuesday when the release Action runs. "),(0,r.yg)("h5",{id:"note-because-chrontab-notation-doesnt-have-a-way-to-schedule-a-job-at-an-interval--ie-every-two-weeks-the-release-action-has-to-be-scheduled-for-every-tuesday-this-means-that-if-the-approve-command-is-run-before-the-tuesday-in-the-middle-of-the-sprint-the-releases-will-go-out-a-week-early"},"NOTE: ",(0,r.yg)("em",{parentName:"h5"},"Because chrontab notation doesn't have a way to schedule a job at an interval , i.e. every two weeks, the release action has to be scheduled for EVERY Tuesday. This means that if the approve command is run before the Tuesday in the middle of the sprint, the releases will go out a week early.")),(0,r.yg)("h2",{id:"qa-builds"},"QA Builds"),(0,r.yg)("h3",{id:"daily-builds"},"Daily Builds"),(0,r.yg)("p",null,"Regular QA builds are distributed every weekday. These builds are based on the most current commit on the develop branch in order to provide QA with the most up-to-date versions as possible and can be augmented with the other types of builds. "),(0,r.yg)("h3",{id:"on-demand-builds"},"On Demand Builds"),(0,r.yg)("p",null,"In addition to our automatically scheduled builds, we also have the ability to create QA or UAT builds at any time from any branch, also known as On Demand builds.  The ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/va-mobile-app/actions/workflows/on_demand_build.yml"},"On Demand Build Workflow"),", which can also be found on the left hand sidebar in ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/department-of-veterans-affairs/va-mobile-app/actions"},"GitHub Actions"),", allows us to specify a branch and an environment to create a build from (",(0,r.yg)("a",{parentName:"p",href:"https://department-of-veterans-affairs.github.io/va-mobile-app/docs/QA/QualityAssuranceProcess/Resources#on-demand-build"},"steps listed out in QA documentation"),")."),(0,r.yg)("h3",{id:"on-demand-build-script"},"On Demand Build Script"),(0,r.yg)("p",null,"On Demand Builds can also be run from a developers local machine to create one-off-builds for distribution to a specific team or for a specific configuration. These builds use the ",(0,r.yg)("a",{parentName:"p",href:"/va-mobile-app/docs/Engineering/DevOps/Automation%20Code%20Docs/Scripts/#on-demand-buildsh"},"on-demand script")," and require the developer to have a copy of the signing certificates and keychains on their local machine. "),(0,r.yg)("p",null,"This type of build is usually for very specific builds the developer wants to distribute to other tracks in Test Flight and Play Store. It is also here as a back-up in case the automated build system experiences issues. This allows for manual kick-off of a build, but guarantees that the build will be, at minimum, configured and built correctly."))}p.isMDXComponent=!0},15680:(e,t,a)=>{a.d(t,{xA:()=>u,yg:()=>m});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(a),h=r,m=c["".concat(l,".").concat(h)]||c[h]||p[h]||i;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},41873:(e,t,a)=>{a(96540)}}]);