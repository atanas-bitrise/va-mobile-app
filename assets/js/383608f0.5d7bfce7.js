"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7703],{2921:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var t=r(58168),a=(r(96540),r(15680));r(41873);const i={title:"Authentication Diagrams"},s=void 0,o={unversionedId:"Engineering/BackEnd/Architecture/Auth Diagrams",id:"Engineering/BackEnd/Architecture/Auth Diagrams",title:"Authentication Diagrams",description:"Username and Password Authorization Flow",source:"@site/docs/Engineering/BackEnd/Architecture/Auth Diagrams.md",sourceDirName:"Engineering/BackEnd/Architecture",slug:"/Engineering/BackEnd/Architecture/Auth Diagrams",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Architecture/Auth Diagrams",draft:!1,tags:[],version:"current",frontMatter:{title:"Authentication Diagrams"},sidebar:"tutorialSidebar",previous:{title:"API",permalink:"/va-mobile-app/docs/Engineering/BackEnd/API/"},next:{title:"Background Workers and Caching",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Architecture/BackgroundWorkersAndCaching"}},p={},c=[{value:"Username and Password Authorization Flow",id:"username-and-password-authorization-flow",level:2},{value:"Biometrics Flow for Username and Password Initial Login",id:"biometrics-flow-for-username-and-password-initial-login",level:2},{value:"Biometrics Flow for Username and Password Subsequent Login",id:"biometrics-flow-for-username-and-password-subsequent-login",level:2},{value:"VA: Health and Benefits Biometrics Initial Login",id:"va-health-and-benefits-biometrics-initial-login",level:2},{value:"VA: Health and Benefits Biometrics Subsequent Login",id:"va-health-and-benefits-biometrics-subsequent-login",level:2}],l={toc:c},u="wrapper";function d(e){let{components:n,...i}=e;return(0,a.yg)(u,(0,t.A)({},l,i,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"username-and-password-authorization-flow"},"Username and Password Authorization Flow"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Username and Password Authorization Flow",src:r(94066).A,width:"822",height:"408"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"sequenceDiagram\n    participant User\n    participant App\n    participant Server\n    User->>App: Enter username and password\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n")),(0,a.yg)("h2",{id:"biometrics-flow-for-username-and-password-initial-login"},"Biometrics Flow for Username and Password Initial Login"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Biometrics Flow for Username and Password Initial Login",src:r(97379).A,width:"919",height:"422"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"sequenceDiagram\n    participant User\n    participant Keychain\n    participant App\n    participant Server\n    User->>App: Enter username and password\n    App--\x3e>User: Do you want to login with biometrics next time?\n    User->>App: Yes!\n    App->>Keychain: Here is the username and pw for this app, keep it safe, please\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n")),(0,a.yg)("h2",{id:"biometrics-flow-for-username-and-password-subsequent-login"},"Biometrics Flow for Username and Password Subsequent Login"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Biometrics Flow for Username and Password Subsequent Login",src:r(42536).A,width:"910",height:"503"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"sequenceDiagram\n    participant User\n    participant Keychain\n    participant App\n    participant Server\n    App->>Keychain: Is there a username and pw saved for this app?\n    Keychain--\x3e>App: Yes there is!\n    App->>User: Can I please have your biometrics?\n    User--\x3e>App: Here you go!\n    App->>Keychain: Here are the biometrics, can you send the username/pw to me?\n    Keychain--\x3e>App: Here are the username and pw.\n    App->>Server: Send username and password\n    Server--\x3e>App: Send auth result\n    App--\x3e>User: Display auth result\n")),(0,a.yg)("h2",{id:"va-health-and-benefits-biometrics-initial-login"},"VA: Health and Benefits Biometrics Initial Login"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Health and Benefits Biometrics Initial Login",src:r(23115).A,width:"912",height:"573"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"sequenceDiagram\n    participant User\n    participant Secure App Storage\n    participant App\n    participant SIS\n    participant Identity Provider\n    User->>App: Tap Login button\n    App->>SIS: Start the sign in process\n    SIS->>User: Which Identity Provider do you want?\n    User--\x3e>SIS: This one please.\n    SIS--\x3e>Identity Provider: Please authenticate this person at IAL2/AAL2/LOA3\n    Identity Provider->>User: Please send your username and password\n    User--\x3e>Identity Provider: Here they are\n    Identity Provider--\x3e>SIS: It's them, I'm sure of it\n    SIS--\x3e>App: Here is a code to get your tokens\n    App->>SIS: Please create a token and session for me\n    SIS--\x3e>App: Done and done! Here is the token\n    App->>User: Do you want to use biometrics to log in?\n    User--\x3e>App: Yes please!\n    App->>Secure App Storage: Please hang on to this for us and lock it with biometrics\n    Secure App Storage--\x3e>App: You got it!\n    App--\x3e>User: Display Auth Result\n")),(0,a.yg)("h2",{id:"va-health-and-benefits-biometrics-subsequent-login"},"VA: Health and Benefits Biometrics Subsequent Login"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Health and Benefits Biometrics Subsequent Login",src:r(33632).A,width:"902",height:"450"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-yaml"},"sequenceDiagram\n    participant User\n    participant Secure App Storage\n    participant App\n    participant SIS\n    App->>Secure App Storage: Is there a stored token?\n    Secure App Storage--\x3e>App: Yes there is\n    App->>User: Can I please have your biometrics?\n    User--\x3e>App: Here you go!\n    App->>Secure App Storage: Here are the biometrics, can you send the token to me?\n    Secure App Storage--\x3e>App: Here it is!\n    App->>SIS: Can I get a refreshed token, please? Here is the old one.\n    SIS--\x3e>App: Here you go, one new token.\n    App--\x3e>User: Display Auth Result\n")),(0,a.yg)("p",null,"In order to regenerate these graphs, add 'mermaid' to the end of the ","`","`","`"," at the beginning of each codeblock."))}d.isMDXComponent=!0},15680:(e,n,r)=>{r.d(n,{xA:()=>l,yg:()=>m});var t=r(96540);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function i(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?i(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=t.createContext({}),c=function(e){var n=t.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},l=function(e){var n=c(e.components);return t.createElement(p.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),u=c(r),g=a,m=u["".concat(p,".").concat(g)]||u[g]||d[g]||i;return r?t.createElement(m,s(s({ref:n},l),{},{components:r})):t.createElement(m,s({ref:n},l))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=r.length,s=new Array(i);s[0]=g;var o={};for(var p in n)hasOwnProperty.call(n,p)&&(o[p]=n[p]);o.originalType=e,o[u]="string"==typeof e?e:a,s[1]=o;for(var c=2;c<i;c++)s[c]=r[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}g.displayName="MDXCreateElement"},97379:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/biometrics-flow-for-username-and-password-initial-login-d79aa634236accd1a397754617b91678.png"},42536:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/biometrics-flow-for-username-and-password-subsequent-login-dc4480d9678629246ccd2ea8f8700a3e.png"},23115:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/health-and-benefits-biometrics-initial-login-6c0eeb69a16fb4c286a8e555018e10b1.png"},33632:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/health-and-benefits-biometrics-subsequent-login-3c7352e14ed487f8fe014f3a24cd0545.png"},94066:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/username-and-password-authorization-flow-8f56c9ff39a716260cd4a305322fe65c.png"},41873:(e,n,r)=>{r(96540)}}]);