"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9340],{83354:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=t(58168),a=(t(96540),t(15680));t(41873);const r={title:"Downtime Messages",sidebar_position:6},s="Downtime Messages",o={unversionedId:"Engineering/FrontEnd/DowntimeMessages",id:"Engineering/FrontEnd/DowntimeMessages",title:"Downtime Messages",description:"Overview",source:"@site/docs/Engineering/FrontEnd/DowntimeMessages.md",sourceDirName:"Engineering/FrontEnd",slug:"/Engineering/FrontEnd/DowntimeMessages",permalink:"/va-mobile-app/docs/Engineering/FrontEnd/DowntimeMessages",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Downtime Messages",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Development Setup Process",permalink:"/va-mobile-app/docs/Engineering/FrontEnd/DevSetupProcess"},next:{title:"Deep Linking",permalink:"/va-mobile-app/docs/Engineering/FrontEnd/PushNotifications/DeepLinking"}},d={},c=[{value:"Overview",id:"overview",level:2},{value:"Maintenance Window Technical Description",id:"maintenance-window-technical-description",level:2},{value:"Downtime Messages Display",id:"downtime-messages-display",level:2},{value:"Back-end",id:"back-end",level:2}],p={toc:c},l="wrapper";function m(e){let{components:n,...r}=e;return(0,a.yg)(l,(0,i.A)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"downtime-messages"},"Downtime Messages"),(0,a.yg)("h2",{id:"overview"},"Overview"),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Downtime Messages")," are error pages that shown to users when a known ",(0,a.yg)("inlineCode",{parentName:"p"},"maintenance window")," is actively occuring for a specific feature in the app. Downtime windows are determined by upstream service providers and compiled into a single list by the back-end. The front-end checks for active downtime windows once per session during the sync stage after login and caches the data for the remainder of the session."),(0,a.yg)("p",null,"Downtime messages use the same display pattern as errors in code, with additional checks in the ",(0,a.yg)("inlineCode",{parentName:"p"},"useError")," utility to check if a downtime error exists for a specific ",(0,a.yg)("inlineCode",{parentName:"p"},"screen ID"),". Multiple features can trigger a downtime message on a single screen, e.g. claims and appeals are two separate features but display on the same page. Whether a downtime message is displayed if a subset of features on the screen are down is a business decision that varies based on feature."),(0,a.yg)("h2",{id:"maintenance-window-technical-description"},"Maintenance Window Technical Description"),(0,a.yg)("p",null,"The data returned from the back-end for a ",(0,a.yg)("inlineCode",{parentName:"p"},"maintenance window")," includes a ",(0,a.yg)("inlineCode",{parentName:"p"},"service name"),", and start time, and an end time. The service name is determined by the back-end and is not directly equivalent to ",(0,a.yg)("inlineCode",{parentName:"p"},"feature names")," used in the front-end, so a mapping from ",(0,a.yg)("inlineCode",{parentName:"p"},"service name")," to ",(0,a.yg)("inlineCode",{parentName:"p"},"feature name")," as well as ",(0,a.yg)("inlineCode",{parentName:"p"},"service name")," to the affected ",(0,a.yg)("inlineCode",{parentName:"p"},"screen ID")," is provided in the ",(0,a.yg)("inlineCode",{parentName:"p"},"store/api/types/Errors.ts")," file. Anytime a new feature with downtime is added, this mapping needs to be updated and the rest of the logic will automatically piggyback off of error logic and the checks in ",(0,a.yg)("inlineCode",{parentName:"p"},"store/slices/errorSlice.ts:checkForDowntimeErrors()"),"."),(0,a.yg)("p",null,"Maintenance windows, as derived from ",(0,a.yg)("inlineCode",{parentName:"p"},"DowntimeFeatureTypeConstants"),", are also used in some cases within view components to disable data fetches from the backend to avoid fetching data that we know will be unavailable or unreliable during maintenance windows."),(0,a.yg)("p",null,"Example return data from ",(0,a.yg)("inlineCode",{parentName:"p"},"/v0/maintenance_windows")," endpoint:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"data: [\n  {\n    attributes: {\n      service: 'direct_deposit_benefits',\n      startTime: '2021-06-01T12:00:00.000Z',\n      endTime: '2021-06-01T18:00:00.000Z',\n    },\n    id: '1',\n    type: 'maintenance_window',\n  },\n  {\n    attributes: {\n      service: 'military_service_history',\n      startTime: '2021-06-01T12:00:00.000Z',\n      endTime: '2021-06-01T18:00:00.000Z',\n    },\n    id: '2',\n    type: 'maintenance_window',\n  },\n]\n")),(0,a.yg)("h2",{id:"downtime-messages-display"},"Downtime Messages Display"),(0,a.yg)("p",null,"The downtime message displays as a full page error with a warning border. The template and an example are show below"),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Downtime Messages Template",src:t(90723).A,width:"806",height:"1336"})),(0,a.yg)("p",null,(0,a.yg)("img",{alt:"Downtime Messages Example",src:t(60043).A,width:"1284",height:"2778"})),(0,a.yg)("h2",{id:"back-end"},"Back-end"),(0,a.yg)("p",null,(0,a.yg)("a",{parentName:"p",href:"/va-mobile-app/docs/Engineering/BackEnd/Features/MaintenanceWindows"},"View back-end documentation")))}m.isMDXComponent=!0},15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>u});var i=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=i.createContext({}),c=function(e){var n=i.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return i.createElement(d.Provider,{value:n},e.children)},l="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},g=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,d=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),l=c(t),g=a,u=l["".concat(d,".").concat(g)]||l[g]||m[g]||r;return t?i.createElement(u,s(s({ref:n},p),{},{components:t})):i.createElement(u,s({ref:n},p))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,s=new Array(r);s[0]=g;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o[l]="string"==typeof e?e:a,s[1]=o;for(var c=2;c<r;c++)s[c]=t[c];return i.createElement.apply(null,s)}return i.createElement.apply(null,t)}g.displayName="MDXCreateElement"},60043:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/downtime-messages-example-adffc5e7f06372cf6204b43e40ddeb2b.png"},90723:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/downtime-messages-template-01f06574813b9222ee681215d88b368a.png"},41873:(e,n,t)=>{t(96540)}}]);