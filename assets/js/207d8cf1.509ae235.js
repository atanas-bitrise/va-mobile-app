"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4376],{47858:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=a(58168),r=(a(96540),a(15680));a(41873);const o={title:"Datadog"},i=void 0,s={unversionedId:"Engineering/BackEnd/Monitoring/DataDog",id:"Engineering/BackEnd/Monitoring/DataDog",title:"Datadog",description:"Existing Mobile Dashboards",source:"@site/docs/Engineering/BackEnd/Monitoring/DataDog.md",sourceDirName:"Engineering/BackEnd/Monitoring",slug:"/Engineering/BackEnd/Monitoring/DataDog",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Monitoring/DataDog",draft:!1,tags:[],version:"current",frontMatter:{title:"Datadog"},sidebar:"tutorialSidebar",previous:{title:"Schema Contract Testing",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Features/SchemaContractTesting"},next:{title:"Logs",permalink:"/va-mobile-app/docs/Engineering/BackEnd/Monitoring/Logs"}},l={},c=[{value:"Existing Mobile Dashboards",id:"existing-mobile-dashboards",level:2},{value:"Creating Alerts",id:"creating-alerts",level:2},{value:"New Issues Monitor",id:"new-issues-monitor",level:2}],g={toc:c},d="wrapper";function p(e){let{components:t,...o}=e;return(0,r.yg)(d,(0,n.A)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"existing-mobile-dashboards"},"Existing Mobile Dashboards"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/apm/services/mobile-app/operations/rack.request/resources?env=eks-prod&panels=qson%3A%28data%3A%28%29%2Cversion%3A%210%29&resources=qson%3A%28data%3A%28visible%3A%21t%2Chits%3A%28selected%3Atotal%29%2Cerrors%3A%28selected%3Atotal%29%2Clatency%3A%28selected%3Ap95%29%2CtopN%3A%215%29%2Cversion%3A%211%29&sort=error-rate%2Cdesc&summary=qson%3A%28data%3A%21f%2Cversion%3A%211%29&view=spans&start=1701356709938&end=1701360309938&paused=false"},"Service Page")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/monitors/90011?view=spans"},"Alerts")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/monitors/213410"},"New Issue Monitor")," (",(0,r.yg)("a",{parentName:"li",href:"#new-issues-monitor"},"see instructions"),")"),(0,r.yg)("li",{parentName:"ul"},"and ",(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/dashboard/j6m-3ws-x4c/mobile-api-dashboard-20?fromUser=false&refresh_mode=sliding&view=spans&from_ts=1715096667291&to_ts=1715100267291&live=true"},"Dashboard (Legacy)"))),(0,r.yg)("p",null,"If you have issues accessing the dashboard or the VA Datadog site reach out in the ",(0,r.yg)("a",{parentName:"p",href:"https://dsva.slack.com/archives/C018V2JCWRJ"},"VA mobile slack channel")),(0,r.yg)("h2",{id:"creating-alerts"},"Creating Alerts"),(0,r.yg)("p",null,"Reference existing alerts linked above to define new alerts. To receive alert messages in slack the Datadog slack tool will need to be added to the channel where you want notifications then the channel also needs to be added via the slack integration within Datadog. Once this is complete the channel will be in a dropdown in the 'Notify your team' section shown above. ",(0,r.yg)("a",{parentName:"p",href:"https://docs.datadoghq.com/integrations/slack/?tab=slackapplication"},"Slack integration docs")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Using slack search to find existing monitors by searching for Datadog",src:a(55979).A,width:"804",height:"364"}),"\n",(0,r.yg)("img",{alt:"VA Digital Service slack integration dashboard with a list of available slack channels",src:a(42160).A,width:"1999",height:"1324"})),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://docs.datadoghq.com/getting_started/"},"Read more about Datadog on the official documentation")),(0,r.yg)("h2",{id:"new-issues-monitor"},"New Issues Monitor"),(0,r.yg)("p",null,"The new issues monitor alerts us to any new errors (i.e., 400+ response status with stacktraces that have not been seen before) that occur in requests that route through the mobile module. It is configured to send an alert to the ",(0,r.yg)("a",{parentName:"p",href:"https://dsva.slack.com/archives/C06T6ABC9MX"},"mobile-new-issue-alerts slack channel"),' anytime a new issue is seen. Many of the new issues are non-concerning and may not appear to be new at all. Changes in the stacktrace can make DataDog consider an issue "new" even if the same error has occurred before. As a result, we need to investigate each new issue to determine whether it\'s a problem or not.'),(0,r.yg)("p",null,"The slack posts sent from DataDog to slack link to the new issue alert, which generally does not contain enough information to understand the underlying problem. To find the stacktrace:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Go to ",(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/monitors/213410"},"VA Mobile new issue monitor")),(0,r.yg)("li",{parentName:"ul"},"Expand the date range if necessary"),(0,r.yg)("li",{parentName:"ul"},"A list of new issues that were observed during that date range will appear in the Events -> Messages section"),(0,r.yg)("li",{parentName:"ul"},"Click on the error. An error detail modal will emerge from the right side of the page and with the detailed error message."),(0,r.yg)("li",{parentName:"ul"},"Click \u201cView in Error Tracking\u201d. This will navigate to a list of new errors that were observed during a period leading up to the error. This will sometimes pick up other new issues that occurred during that period and may include instances of the error observed by both the mobile-app and vets-api APMs.",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Sometimes this will be empty and the only path forward is to search ",(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/logs"},"logs")," for the error message"))),(0,r.yg)("li",{parentName:"ul"},"Click on the instance of the error. An error detail modal will emerge from the right side of the page",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Sometimes this modal will correctly attach to the error stack trace"),(0,r.yg)("li",{parentName:"ul"},"Other times, it will not provide any stacktrace. In those cases, you can:",(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"Search ",(0,r.yg)("a",{parentName:"li",href:"https://vagov.ddog-gov.com/logs"},"logs")," for the error message"),(0,r.yg)("li",{parentName:"ul"},"Click \u201cInvestigate in APM\u201d button")))))))}p.isMDXComponent=!0},15680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>m});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},g=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),d=c(a),h=r,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||o;return a?n.createElement(m,i(i({ref:t},g),{},{components:a})):n.createElement(m,i({ref:t},g))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},55979:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/datadog-slack-integration-1-fbc1c9798b0dba05b2ffb493bbd95a7f.png"},42160:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/datadog-slack-integration-2-becf3971fcf37992b370e3cf6d80860b.png"},41873:(e,t,a)=>{a(96540)}}]);